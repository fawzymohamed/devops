---
title: "File Permissions"
description: "Master Linux file permissions including chmod, chown, and special permission bits like SUID and sticky bit."
estimatedMinutes: 15
difficulty: beginner
learningObjectives:
  - "Read and interpret the rwx permission notation"
  - "Use chmod with both symbolic and numeric notation"
  - "Change file ownership with chown and chgrp"
  - "Understand special permissions: SUID, SGID, and sticky bit"
quiz:
  passingScore: 70
  questions:
    - question: "What permission does the number 7 represent in numeric notation?"
      type: single
      options:
        - "Read only"
        - "Read and write"
        - "Read, write, and execute"
        - "Execute only"
      correctAnswer: "Read, write, and execute"
      explanation: "In numeric notation, read=4, write=2, execute=1. Adding them: 4+2+1=7 gives full permissions (rwx). So 7 means read, write, and execute."

    - question: "What does the permission string '-rwxr-xr--' mean?"
      type: single
      options:
        - "Everyone has full access"
        - "Owner has rwx, group has rx, others have r"
        - "Only the owner can access the file"
        - "The file is a directory"
      correctAnswer: "Owner has rwx, group has rx, others have r"
      explanation: "Reading left to right after the file type indicator: owner gets rwx (read/write/execute), group gets r-x (read/execute), others get r-- (read only)."

    - question: "Select all commands that can change file permissions."
      type: multiple
      options:
        - "chmod"
        - "chown"
        - "ls -l"
        - "chgrp"
      correctAnswers:
        - "chmod"
      explanation: "chmod changes file permissions (read/write/execute). chown changes ownership, chgrp changes group - neither changes permissions. ls -l only displays permissions."

    - question: "The SUID bit allows a program to run with the permissions of its owner regardless of who runs it."
      type: true-false
      correctAnswer: true
      explanation: "True. SUID (Set User ID) makes an executable run with the file owner's permissions. The passwd command uses this - it runs as root even when a regular user executes it, allowing users to change their own passwords."

    - question: "Which numeric permission should you use for a script that the owner can execute but others can only read?"
      type: single
      options:
        - "777"
        - "644"
        - "744"
        - "700"
      correctAnswer: "744"
      explanation: "744 breaks down as: owner=7 (rwx - full access), group=4 (r-- - read only), others=4 (r-- - read only). This lets the owner run the script while others can only read it."
---

# File Permissions

Every file in Linux has permissions that control who can read, write, and execute it. Understanding permissions is essential for security. Wrong permissions can expose sensitive data or prevent applications from working.

## Why Permissions Matter in DevOps

As a DevOps engineer, you will:

- Set permissions on configuration files to protect secrets
- Ensure web servers can read files but not modify them
- Make scripts executable
- Debug "permission denied" errors during deployments

## Understanding Permission Notation

Run `ls -l` to see permissions:

```bash
ls -l /etc/passwd

-rw-r--r-- 1 root root 2847 Jan 10 08:30 /etc/passwd
```

The first column shows permissions. Let's break it down:

```
-rw-r--r--
│├──┤├──┤├──┤
│  │   │   │
│  │   │   └── Others (everyone else)
│  │   └────── Group
│  └────────── Owner
└───────────── File type (- = file, d = directory)
```

### The Three Permission Types

| Symbol | Permission | For Files | For Directories |
|--------|------------|-----------|-----------------|
| `r` | Read | View content | List contents |
| `w` | Write | Modify content | Create/delete files |
| `x` | Execute | Run as program | Enter directory |

### Reading Permission Strings

```
-rwxr-xr--
```

- `-` = Regular file (d would mean directory)
- `rwx` = Owner can read, write, and execute
- `r-x` = Group can read and execute (no write)
- `r--` = Others can only read

## Changing Permissions: chmod

The `chmod` command changes permissions. You can use either symbolic or numeric notation.

### Symbolic Notation

```bash
# Add execute permission for owner
chmod u+x script.sh

# Remove write permission for group
chmod g-w file.txt

# Set read-only for others
chmod o=r file.txt

# Add execute for everyone
chmod a+x script.sh
```

**Symbols:**
- `u` = user (owner)
- `g` = group
- `o` = others
- `a` = all (everyone)

**Operations:**
- `+` = add permission
- `-` = remove permission
- `=` = set exact permission

### Numeric Notation

Each permission has a value:
- Read (r) = 4
- Write (w) = 2
- Execute (x) = 1

Add them to get the permission for each category:

```bash
# rwx = 4+2+1 = 7
# rw- = 4+2+0 = 6
# r-x = 4+0+1 = 5
# r-- = 4+0+0 = 4
```

::illustration-linear-flow
---
steps:
  - label: Owner
    sublabel: "rwx = 7"
    icon: "\U0001F464"
    color: violet
  - label: Group
    sublabel: "r-x = 5"
    icon: "\U0001F465"
    color: blue
  - label: Others
    sublabel: "r-- = 4"
    icon: "\U0001F30D"
    color: cyan
direction: horizontal
size: full
---
::

```bash
# Set permissions using three digits
chmod 755 script.sh    # rwxr-xr-x
chmod 644 config.txt   # rw-r--r--
chmod 600 secrets.key  # rw-------
chmod 700 private/     # rwx------
```

### Common Permission Patterns

::illustration-checklist
---
title: Common Permission Settings
items:
  - text: "755 - Scripts, executables (rwxr-xr-x)"
    icon: "\U0001F4DC"
  - text: "644 - Regular files (rw-r--r--)"
    icon: "\U0001F4C4"
  - text: "600 - Private files (rw-------)"
    icon: "\U0001F512"
  - text: "700 - Private directories (rwx------)"
    icon: "\U0001F4C1"
  - text: "777 - Everyone full access (avoid!)"
    icon: "\U000026A0\uFE0F"
note: Use 600 for sensitive files like SSH keys
color: emerald
size: 2xl
---
::

## Changing Ownership: chown and chgrp

### chown - Change Owner

```bash
# Change owner
chown ahmed file.txt

# Change owner and group
chown ahmed:developers file.txt

# Change owner recursively
chown -R ahmed:developers project/
```

### chgrp - Change Group

```bash
# Change group only
chgrp developers file.txt

# Change group recursively
chgrp -R webteam /var/www/
```

**Note:** Usually only root can change file ownership.

## Special Permissions

Beyond the basic rwx, Linux has three special permission bits.

### SUID (Set User ID)

When set on an executable, the program runs with the **owner's permissions**, not the user who runs it.

```bash
# Check for SUID (s in owner execute position)
ls -l /usr/bin/passwd
-rwsr-xr-x 1 root root 59976 Jan 10 /usr/bin/passwd

# Set SUID
chmod u+s program
chmod 4755 program    # 4 = SUID
```

The `passwd` command needs SUID because regular users need to modify `/etc/shadow` (a root-owned file) to change their passwords.

### SGID (Set Group ID)

On executables, runs with the group's permissions. On directories, new files inherit the directory's group.

```bash
# Set SGID on directory
chmod g+s shared-folder/
chmod 2755 shared-folder/    # 2 = SGID

# New files in shared-folder will inherit its group
```

### Sticky Bit

On directories, prevents users from deleting files they don't own, even if they have write permission on the directory.

```bash
# Check /tmp - notice the 't' at the end
ls -ld /tmp
drwxrwxrwt 10 root root 4096 Jan 15 /tmp

# Set sticky bit
chmod +t shared-folder/
chmod 1777 shared-folder/    # 1 = sticky bit
```

The `/tmp` directory uses sticky bit so users can create files but cannot delete each other's files.

### Special Permission Summary

| Bit | Value | Symbol | Effect |
|-----|-------|--------|--------|
| SUID | 4 | s (in owner) | Runs as owner |
| SGID | 2 | s (in group) | Runs as group / inherit group |
| Sticky | 1 | t (in others) | Only owner can delete |

## Practical Examples

### Making a Script Executable

```bash
# Create script
echo '#!/bin/bash' > myscript.sh
echo 'echo "Hello, DevOps!"' >> myscript.sh

# Make it executable
chmod +x myscript.sh

# Or using numeric
chmod 755 myscript.sh

# Run it
./myscript.sh
```

### Securing SSH Keys

```bash
# SSH requires strict permissions
chmod 600 ~/.ssh/id_rsa        # Private key
chmod 644 ~/.ssh/id_rsa.pub    # Public key
chmod 700 ~/.ssh/              # SSH directory
```

### Setting Up a Shared Directory

```bash
# Create shared directory
sudo mkdir /shared

# Set group and SGID
sudo chgrp developers /shared
sudo chmod 2775 /shared

# Now all files created here belong to 'developers' group
```

## Troubleshooting Permission Issues

When you see "Permission denied":

1. Check current permissions: `ls -la file`
2. Check who owns the file: Look at owner and group
3. Check if you need sudo: `sudo cat file`
4. Check directory permissions: You need `x` on directories to enter them

## Key Takeaways

- Permissions control read (r), write (w), and execute (x) access
- Three categories: owner, group, and others
- Numeric notation: r=4, w=2, x=1 (add them up)
- chmod changes permissions, chown changes ownership
- Special bits: SUID (runs as owner), SGID (inherits group), sticky (prevent deletion)
- SSH keys need strict permissions (600 for private, 644 for public)

In the next lesson, you will learn about managing users and groups in Linux.

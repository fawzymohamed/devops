---
title: "Stashing Changes"
description: "Learn how to temporarily save uncommitted changes using git stash so you can switch contexts quickly."
estimatedMinutes: 10
difficulty: beginner
learningObjectives:
  - "Understand what git stash does and when to use it"
  - "Stash and retrieve changes effectively"
  - "Manage multiple stashes"
  - "Apply stash best practices"
prerequisites:
  - "git-basics"
quiz:
  passingScore: 70
  questions:
    - question: "What does git stash do?"
      type: single
      options:
        - "Deletes uncommitted changes"
        - "Commits changes to a temporary branch"
        - "Saves uncommitted changes and cleans working directory"
        - "Pushes changes to remote"
      correctAnswer: "Saves uncommitted changes and cleans working directory"
      explanation: "Stash saves your modified tracked files and staged changes, then reverts your working directory to match HEAD. Changes are saved in a stack."

    - question: "Select all commands that retrieve stashed changes."
      type: multiple
      options:
        - "git stash pop"
        - "git stash apply"
        - "git stash get"
        - "git stash restore"
      correctAnswers:
        - "git stash pop"
        - "git stash apply"
      explanation: "git stash pop applies the stash and removes it from the stack. git stash apply applies it but keeps it in the stack for potential reuse."

    - question: "The git stash pop command keeps the stash in the list after applying."
      type: true-false
      correctAnswer: false
      explanation: "False. Pop applies the stash AND removes it from the stack. Use 'git stash apply' if you want to keep the stash for later use."

    - question: "What command shows all stashed changes?"
      type: single
      options:
        - "git stash show"
        - "git stash list"
        - "git stash all"
        - "git stash status"
      correctAnswer: "git stash list"
      explanation: "git stash list shows all stashes in the stack. git stash show displays the changes in a specific stash."
---

# Stashing Changes

You are working on a feature when suddenly you need to fix a bug in production. But you have uncommitted changes you do not want to commit yet. What do you do? This is where `git stash` saves the day.

## What is Stash?

Stash temporarily shelves your changes so you can work on something else. It saves your modified files and staged changes, then cleans your working directory.

Think of it as putting your work in a drawer to deal with later.

## When to Use Stash

- **Context switching**: Need to work on another branch urgently
- **Pulling updates**: Have local changes but need to pull remote changes
- **Testing clean state**: Want to test something without your changes
- **Not ready to commit**: Changes are incomplete but you need a clean state

## Basic Stash Commands

::illustration-linear-flow
---
steps:
  - label: Stash
    sublabel: Save changes
    icon: "\U0001F4E6"
    color: blue
  - label: Work
    sublabel: Do other things
    icon: "\U0001F527"
    color: violet
  - label: Pop
    sublabel: Restore changes
    icon: "\U0001F4E4"
    color: emerald
direction: horizontal
size: full
---
::

### Saving Changes

```bash
# Stash all modified tracked files
git stash

# Stash with a descriptive message
git stash save "WIP: login form validation"

# Or the newer syntax
git stash push -m "WIP: login form validation"
```

### Viewing Stashes

```bash
# List all stashes
git stash list

# Example output
stash@{0}: WIP: login form validation
stash@{1}: On feature: API refactoring
stash@{2}: WIP on main: fix typo

# Show what changed in latest stash
git stash show

# Show detailed diff
git stash show -p

# Show specific stash
git stash show stash@{1}
```

### Retrieving Changes

```bash
# Apply and remove from stack
git stash pop

# Apply but keep in stack
git stash apply

# Apply specific stash
git stash pop stash@{1}
git stash apply stash@{2}
```

## Pop vs Apply

| Command | What it Does |
|---------|--------------|
| `git stash pop` | Applies stash, removes from stack |
| `git stash apply` | Applies stash, keeps in stack |

Use `pop` when you are done with the stash. Use `apply` when you might need it again.

## Stash Options

### Include Untracked Files

By default, stash only saves tracked files. To include new files:

```bash
# Include untracked files
git stash -u

# Or
git stash --include-untracked

# Include untracked and ignored files
git stash -a
# Or
git stash --all
```

### Stash Specific Files

```bash
# Stash only specific files
git stash push -m "config changes" config.yml settings.py
```

### Keep Staged Changes

```bash
# Stash only unstaged changes, keep staged
git stash --keep-index
```

## Managing Stashes

### Deleting Stashes

```bash
# Delete specific stash
git stash drop stash@{1}

# Delete all stashes
git stash clear
```

### Creating a Branch from Stash

If your stash causes conflicts, create a branch:

```bash
# Create branch with stashed changes
git stash branch new-branch-name

# Uses stash@{0} by default
# Creates branch, checks it out, applies stash, drops stash
```

## Practical Example

Urgent bug fix while working on a feature:

```bash
# You are working on feature/login
git status
# Modified: login.js (not ready to commit)

# Urgent bug fix needed
git stash save "WIP: login validation incomplete"

# Switch to main
git checkout main

# Create hotfix branch and fix the bug
git checkout -b hotfix/crash-fix
# ... fix the bug ...
git commit -m "Fix crash on startup"

# Merge hotfix
git checkout main
git merge hotfix/crash-fix

# Go back to feature
git checkout feature/login

# Restore your work
git stash pop

# Continue where you left off
git status
# Modified: login.js
```

## Handling Stash Conflicts

If applying a stash causes conflicts:

```bash
git stash pop
# CONFLICT in file.js

# The stash was NOT dropped because of conflicts
# Resolve the conflict
# ... edit file.js ...

git add file.js

# Manually drop the stash after resolving
git stash drop
```

## Viewing Stash Contents Without Applying

```bash
# See summary of changes
git stash show stash@{0}

# See full diff
git stash show -p stash@{0}

# Or use diff
git diff stash@{0}
```

## Best Practices

::illustration-checklist
---
title: Stash Best Practices
items:
  - text: Use descriptive messages (-m)
    icon: "\U0001F4DD"
  - text: Don't let stashes pile up
    icon: "\U0001F5D1\uFE0F"
  - text: Prefer commits over long-lived stashes
    icon: "\U00002705"
  - text: Check stash list regularly
    icon: "\U0001F4CB"
note: Old stashes are easy to forget
color: blue
size: 2xl
---
::

## Common Mistakes to Avoid

1. **Forgetting about stashes**: Old stashes get confusing. Clean them up.
2. **Using stash instead of commits**: For longer work, commit to a branch instead.
3. **Not using messages**: `stash@{3}` tells you nothing. Use `-m`.
4. **Stashing sensitive data**: Stashes are local only, but still be careful.

## Stash Quick Reference

| Command | Purpose |
|---------|---------|
| `git stash` | Save changes |
| `git stash push -m "msg"` | Save with message |
| `git stash -u` | Include untracked files |
| `git stash list` | Show all stashes |
| `git stash show` | Show stash summary |
| `git stash show -p` | Show stash diff |
| `git stash pop` | Apply and remove |
| `git stash apply` | Apply and keep |
| `git stash drop` | Delete a stash |
| `git stash clear` | Delete all stashes |
| `git stash branch name` | Create branch from stash |

## Key Takeaways

- Stash temporarily saves uncommitted changes
- Use it for quick context switches, not long-term storage
- `pop` applies and removes, `apply` keeps the stash
- Add `-m` message to remember what you stashed
- Include untracked files with `-u` flag
- Clean up old stashes regularly

In the next lesson, you will learn how to resolve merge conflicts when Git cannot automatically combine changes.

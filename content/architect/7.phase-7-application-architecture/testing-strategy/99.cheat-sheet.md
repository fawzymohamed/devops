---
title: "Testing Strategy - Quick Reference"
description: "Key concepts and quick reference for testing strategy patterns including test pyramid, TDD, contract testing, and security testing."
estimatedMinutes: 5
difficulty: intermediate
learningObjectives:
  - "Quick reference for testing strategy concepts"
isCheatSheet: true
cheatSheetTopic: "Testing Strategy"
---

# Testing Strategy - Quick Reference

## Test Pyramid

| Layer | Quantity | Speed | What It Tests |
|-------|----------|-------|---------------|
| **Unit** | Many | Milliseconds | Single function/class in isolation |
| **Integration** | Some | Seconds | Module boundaries, DB, APIs |
| **E2E** | Few | Minutes | Full stack user workflows |

**Rule of thumb:** If a bug can be caught at a lower layer, test it there.

**Anti-patterns:**
- **Ice cream cone** -- Many E2E/manual tests, few unit tests
- **Hourglass** -- Many unit + E2E, but no integration tests

---

## TDD Cycle (Red-Green-Refactor)

1. **Red** -- Write a failing test for new behavior
2. **Green** -- Write minimum code to make it pass
3. **Refactor** -- Clean up without changing behavior
4. Repeat

### TDD with AI Agents

| Step | Who Does It | Why |
|------|-------------|-----|
| Write test | Human architect | Tests define the spec clearly |
| Write code | AI agent | AI implements to pass the test |
| Run tests | CI pipeline | Automated verification |
| Review | Human architect | Check quality, security, style |

**Key rule:** Never let the AI write both the test and the implementation without human review.

---

## Contract Testing

**Purpose:** Verify API agreements between services without running the full stack.

| Approach | Who Writes Contract | Best For |
|----------|---------------------|----------|
| **Consumer-driven** | Consumer (caller) | Internal microservices |
| **Provider-driven** | Provider (API owner) | Public APIs |

**Catches:** Renamed fields, changed types, missing fields, wrong status codes

**Does NOT catch:** Business logic, performance, DB queries, complex workflows

---

## Property-Based Testing

**Concept:** Define rules that must hold for ALL valid inputs; framework generates random inputs.

| Property Pattern | Example |
|------------------|---------|
| **Roundtrip** | `decode(encode(x)) == x` |
| **Idempotent** | `sort(sort(x)) == sort(x)` |
| **Invariant** | `len(sorted(x)) == len(x)` |
| **Comparison** | `fast_fn(x) == simple_fn(x)` |

**Shrinking:** Simplifies failing input to the smallest reproduction case.

---

## Testing AI-Generated Code

### Common AI Code Weaknesses

| Weakness | Test Strategy |
|----------|---------------|
| Hallucinated APIs | Import/dependency verification |
| Missing null checks | Adversarial input testing |
| Happy-path only | Edge case and boundary tests |
| Subtle logic errors | Mutation testing |
| Output regression | Snapshot testing |

### Adversarial Input Checklist

> Test with: `None`, `""`, `" "`, `0`, `-1`, `float('inf')`, very long strings, Unicode, SQL injection strings, XSS payloads, emoji, type mismatches.

### Quality Gate for AI Code

1. All tests pass
2. No hallucinated imports
3. Adversarial inputs handled
4. Mutation score above 75%
5. Lint and static analysis clean
6. Human reviewed assertions

---

## Security Testing in CI/CD

| Aspect | SAST | DAST |
|--------|------|------|
| **What** | Scans source code | Tests running app |
| **When** | Build stage (early) | Staging stage (late) |
| **Needs** | Source code access | Running environment |
| **Finds** | SQL injection patterns, hardcoded secrets, unsafe functions | XSS, auth bypass, missing headers, misconfigurations |
| **Speed** | Minutes | Minutes to hours |
| **False positives** | Higher | Lower |

### Pipeline Order

> Code --> Build --> SAST --> Unit Tests --> Deploy Staging --> DAST --> Deploy Production

### False Positive Management

- Start with high-confidence rules only
- Use suppression files with documented reasons
- Block on critical/high; track medium/low as tickets
- Review weekly with a security champion

---

## Quick Decision Guide

| Question | Answer |
|----------|--------|
| Testing a pure function? | Unit test |
| Testing DB queries? | Integration test |
| Testing user login flow? | E2E test (keep few) |
| Multiple services with APIs? | Contract test |
| Need to explore edge cases? | Property-based test |
| AI wrote the code? | Adversarial + mutation testing |
| Code security? | SAST in build, DAST in staging |
